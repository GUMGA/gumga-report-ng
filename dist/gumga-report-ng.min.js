!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,n){"use strict";function i(t,e,n,i,o,r,a){function s(t,e){t&&e&&Object.keys(t).forEach(function(n){t[n]instanceof Object?s(t[n],e[n]):e[n]&&(t[n]=e[n])})}var u=this,c={},d={};u.options=u.options||{appearance:{fullScreenMode:!1},height:"940px"};var l=function(t){t.onCreateReport=function(t){if(c&&c.jsonReport){new e.Stimulsoft.Report.StiReport;t.isWizardUsed=!1,t.report=entity.data.name.definition,t.report.reportFile=entity.data.name}}},p=function(t){t.onSaveReport=function(t){t.report.reportName=t.fileName,t.report.reportAlias=t.fileName;var e=t.report.saveToJsonString();u.entity.data.name=t.fileName,u.entity.data.definition=e,r.save(u.entity.data).then(function(t){u.onSave&&u.onSave({$value:t.data.data})})}},f=function(){StiOptions.WebServer.url=r.connectionLocal,StiOptions.Services._databases=[],u.databases||(u.databases="postgresql,mysql,oracle"),u.databases.includes("postgresql")&&StiOptions.Services._databases.add(new Stimulsoft.Report.Dictionary.StiPostgreSQLDatabase),u.databases.includes("mysql")&&StiOptions.Services._databases.add(new Stimulsoft.Report.Dictionary.StiMySqlDatabase),u.databases.includes("oracle")&&StiOptions.Services._databases.add(new Stimulsoft.Report.Dictionary.StiOracleDatabase)};t.configureEntity=function(){if(u.entity){f();var t=new e.Stimulsoft.Designer.StiDesignerOptions;s(t,u.options);var n=new e.Stimulsoft.Designer.StiDesigner(t,"StiDesigner",!1),i=new e.Stimulsoft.Report.StiReport;if(u.entity.data.id)i.load(u.entity.data.definition);else{var o=new Stimulsoft.Report.Dictionary.StiMySqlDatabase("Security Local","","jdbc:mysql://localhost:3306/security?zeroDateTimeBehavior=convertToNull; user = root; password = senha;",!1);i.dictionary.databases.clear(),i.dictionary.databases.add(o),i.dictionary.synchronize()}i.dictionary.variable=d,p(n),l(n),n.report=i,n.renderHtml("designer")}},t.init=function(e){o(function(){r.getNew().then(function(n){u.entity={},u.entity.data=e||n.data,t.configureEntity()})},2e3)},t.configureEntityViewer=function(){if(u.entity){StiOptions.WebServer.url=r.connectionLocal;var t=new e.Stimulsoft.Viewer.StiViewer(null,"StiViewer",!1),n=new e.Stimulsoft.Report.StiReport;n.load(u.entity.data.definition),t.report=n,t.renderHtml("viewer")}},t.initViewer=function(e){o(function(){r.getNew().then(function(n){u.entity={},u.entity.data=e||n.data,t.configureEntityViewer()})},2e3)},u.updateReport=function(e){u.viewer?t.initViewer(e):t.init(e)},u.$onChanges=function(t){t.viewer&&t.viewer.currentValue&&u.entity&&u.updateReport(u.entity.data),t.entity&&t.entity.currentValue&&t.entity.currentValue.id&&u.updateReport(t.entity.currentValue)},t.$watch("$ctrl.options",function(e){t.configureEntity()},!0)}Object.defineProperty(e,"__esModule",{value:!0}),i.$inject=["$scope","$window","gumgaController","$q","$timeout","$gumgaReport","$attrs"];var o=n(3),r={bindings:{viewer:"<?",entity:"<?",onSave:"&?",height:"<?",options:"<?",databases:"<?"},templateUrl:o,controller:i};e.default=r},function(t,e,n){"use strict";function i(){return{$get:["GumgaRest","$http",function(t,e){var n=this;n._APILocation=n._APILocation||window.APILocation,n._token=n._token||sessionStorage.getItem("token")||localStorage.getItem("token");var i=new t(n._APILocation.apiLocation+"/api/gumgareport");return i.connectionLocal=n._APILocation.apiLocation+"/api/genericreport/reportconnection?gumgaToken="+n._token,i.getNew=function(){return e.get(n._APILocation.apiLocation+"/api/gumgareport/new")},i}],setAPILocation:function(t){this._APILocation=t},getAPILocation:function(t){return this._APILocation},setToken:function(t){this._token=t},getToken:function(t){return this._token}}}Object.defineProperty(e,"__esModule",{value:!0}),i.$inject=[],e.default=angular.module("gumgaReport.provider",[]).provider("$gumgaReport",i)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1);i(a);t.exports=angular.module("ngGumgaReport",["gumgaReport.provider"]).component("gumgaReport",r.default)},function(t,e){var n="/gumga-report.html";window.angular.module("ng").run(["$templateCache",function(t){t.put(n,'<div>\n\t<div ng-show="!$ctrl.viewer">\n\t\t<div id="designer"></div>\n\t</div>\n\n\t<div ng-show="$ctrl.viewer">\n\t\t<div id="viewer"></div>\n\t</div>\n\t<link rel="stylesheet" id="gumga-report-stylesheet">\n</div>')}]),t.exports=n}]);