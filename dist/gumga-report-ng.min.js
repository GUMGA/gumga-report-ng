!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,i){"use strict";function n(t,e,i,n,o,a,r){function s(t,e){t&&e&&Object.keys(t).forEach(function(i){t[i]instanceof Object?s(t[i],e[i]):e[i]&&(t[i]=e[i])})}var c=this,u={};c.options=c.options||{appearance:{fullScreenMode:!1},height:"940px"};var l=function(t){t.onCreateReport=function(t){if(u&&u.jsonReport){new e.Stimulsoft.Report.StiReport;t.isWizardUsed=!1,t.report=entity.name.definition,t.report.reportFile=entity.name}}},d=function(t){t.onBeginProcessData=function(t){a.isEnableOi()}},p=function(t){t.onSaveReport=function(t){t.report.reportName=t.fileName,t.report.reportAlias=t.fileName;var e=t.report.saveToJsonString();c.entity.name=t.fileName,c.entity.definition=e,a.save(c.entity).then(function(t){c.onSave&&c.onSave({$value:t.data.data})})}},f=function(){StiOptions.WebServer.url=a.connectionLocal,StiOptions.Services._databases=[],c.databases||(c.databases="postgresql,mysql,oracle,json,xml,csv,excel"),c.databases.includes("postgresql")&&StiOptions.Services._databases.add(new Stimulsoft.Report.Dictionary.StiPostgreSQLDatabase),c.databases.includes("mysql")&&StiOptions.Services._databases.add(new Stimulsoft.Report.Dictionary.StiMySqlDatabase),c.databases.includes("oracle")&&StiOptions.Services._databases.add(new Stimulsoft.Report.Dictionary.StiOracleDatabase),c.databases.includes("json")&&StiOptions.Services._databases.add(new Stimulsoft.Report.Dictionary.StiJsonDatabase),c.databases.includes("xml")&&StiOptions.Services._databases.add(new Stimulsoft.Report.Dictionary.StiXmlDatabase),c.databases.includes("csv")&&StiOptions.Services._databases.add(new Stimulsoft.Report.Dictionary.StiCsvDatabase),c.databases.includes("excel")&&StiOptions.Services._databases.add(new Stimulsoft.Report.Dictionary.StiExcelDatabase)};t.configureEntity=function(){if(c.entity){f();var t=new e.Stimulsoft.Designer.StiDesignerOptions;s(t,c.options);var i=new e.Stimulsoft.Designer.StiDesigner(t,"StiDesigner",!1),n=new e.Stimulsoft.Report.StiReport;if(c.entity.id)n.load(c.entity.definition);else{var o=new Stimulsoft.Report.Dictionary.StiMySqlDatabase("Security MySQL","","url=jdbc:mysql://localhost:3306/security?zeroDateTimeBehavior=convertToNull; user = root; password = senha;",!1),r=new Stimulsoft.Report.Dictionary.StiOracleDatabase("Security Oracle","","url=jdbc:oracle:thin:@localhost:1521/orcl;user = root;password = senha;",!1);n.dictionary.databases.clear();var u=new Stimulsoft.Report.Dictionary.StiVariable("Gumga Examples","oi","oi","Organization ID",Stimulsoft.System.Type.valueOf(),"[[oi]]",!0,Stimulsoft.Report.Dictionary.StiVariableInitBy.Value,!1);n.dictionary.variables.add(u),c.dictionaryDatabases&&(c.dictionaryDatabases instanceof Array?c.dictionaryDatabases.forEach(function(t){n.dictionary.databases.add(t)}):n.dictionary.databases.add(c.dictionaryDatabases)),c.dictionaryVariables&&(c.dictionaryVariables instanceof Array?c.dictionaryVariables.forEach(function(t){n.dictionary.variables.add(t)}):n.dictionary.variables.add(c.dictionaryVariables)),n.dictionary.databases.add(o),n.dictionary.databases.add(r),n.dictionary.synchronize()}p(i),l(i),d(i),i.report=n,a.licenseKey()&&(e.Stimulsoft.Base.StiLicense.key=a.licenseKey()),i.renderHtml("designer")}},t.init=function(e){o(function(){e?c.entity=e:a.getNew().then(function(t){c.entity=t.data}),t.configureEntity()})},t.configureEntityViewer=function(){if(c.entity){StiOptions.WebServer.url=a.connectionLocal;var t=new e.Stimulsoft.Viewer.StiViewer(null,"StiViewer",!1),i=new e.Stimulsoft.Report.StiReport;i.load(c.entity.definition),i.dictionary.variable=c.variables,d(t),t.report=i,t.renderHtml("viewer")}},t.initViewer=function(e){o(function(){e?c.entity=e:a.getNew().then(function(t){c.entity=t.data}),t.configureEntityViewer()})},c.updateReport=function(e){c.viewer?t.initViewer(e):t.init(e)},c.$onChanges=function(t){t.viewer&&t.viewer.currentValue&&c.entity&&c.updateReport(c.entity),t.entity&&t.entity.currentValue&&t.entity.currentValue.id&&c.updateReport(t.entity.currentValue)},t.$watch("$ctrl.options",function(e){t.configureEntity()},!0)}Object.defineProperty(e,"__esModule",{value:!0}),n.$inject=["$scope","$window","gumgaController","$q","$timeout","$gumgaReport","$attrs"];var o=i(3),a={bindings:{viewer:"<?",entity:"<",onSave:"&?",options:"<?",databases:"<?",additionalFilter:"<?",dictionaryDatabases:"<?",dictionaryVariables:"<?"},templateUrl:o,controller:n};e.default=a},function(t,e,i){"use strict";function n(){return{$get:["GumgaRest","$http",function(t,e){var i=this;i._isEmpty=function(t){return void 0==t||null==t},i._APILocation=i._APILocation||window.APILocation,i._token=i._token||sessionStorage.getItem("token")||localStorage.getItem("token"),i._licenseKey=i._licenseKey||void 0,i._enableOi=i._isEmpty(i._enableOi)||i._enableOi,i._urlGumgaReport=i._urlGumgaReport||i._APILocation.apiLocation+"/api/gumgareport",i._urlReportConnection=i._urlReportConnection||i._APILocation.apiLocation+"/api/genericreport/reportconnection",i._token&&(i._urlGumgaReport=i._urlGumgaReport.concat("?gumgaToken="+i._token),i._urlReportConnection=i._urlReportConnection.concat("?gumgaToken="+i._token));var n=new t(i._urlGumgaReport);return n.connectionLocal=i._urlReportConnection,n.getUrlGumgaReport=function(){return i._urlGumgaReport.split("?")},n.getNew=function(){return e.get(n.getUrlGumgaReport()+"/new"+(i._token?"?gumgaToken="+i._token:""))},n.licenseKey=function(){return i._licenseKey},n.isEnableOi=function(){return i._enableOi},n}],setAPILocation:function(t){this._APILocation=t},getAPILocation:function(t){return this._APILocation},setLocalizationLang:function(t,e){Stimulsoft.Base.Localization.StiLocalization.addLocalizationFile(t,!1,e||"Portuguese (Brazil)"),Stimulsoft.Base.Localization.StiLocalization.setLocalizationFile(t,!0)},setToken:function(t){this._token=t},getToken:function(t){return this._token},setUrlGumgaReport:function(t){this._urlGumgaReport=t},getUrlGumgaReport:function(){return this._urlGumgaReport},setUrlReportConnection:function(t){this._urlReportConnection=t},getUrlReportConnection:function(){return this._urlReportConnection},setLicenseKey:function(t){this._licenseKey=t},getLicenseKey:function(t){return this._licenseKey},enableOi:function(){this._enableOi=!0},disableOi:function(){this._enableOi=!1}}}Object.defineProperty(e,"__esModule",{value:!0}),n.$inject=[],e.default=angular.module("gumga.report.provider",[]).provider("$gumgaReport",n)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=i(0),a=n(o),r=i(1);n(r);t.exports=angular.module("gumga.report",["gumga.report.provider"]).component("gumgaReport",a.default)},function(t,e){var i="/gumga-report.html";window.angular.module("ng").run(["$templateCache",function(t){t.put(i,'<div>\n\t<div ng-show="!$ctrl.viewer">\n\t\t<div id="designer"></div>\n\t</div>\n\n\t<div ng-show="$ctrl.viewer">\n\t\t<div id="viewer"></div>\n\t</div>\n\t<link rel="stylesheet" id="gumga-report-stylesheet">\n</div>')}]),t.exports=i}]);